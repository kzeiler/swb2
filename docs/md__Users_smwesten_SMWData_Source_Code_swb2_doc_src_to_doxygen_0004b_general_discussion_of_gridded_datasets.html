<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>SWB 2.0: General Discussion of Gridded Datasets {\#general\_discussion\_of\_gridded\_datasets}</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<!-- MathJax customization -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {processEnvironments: true,
              inlineMath: [ ['$','$'], ['\\(','\\)'] ],
              displayMath: [ ['$$','$$'], ['\\[','\\]'] ],
              processEscapes: true 
      },
    TeX: { equationNumbers: { autoNumber: "all" } }
  });
</script>
<script type="text/javascript"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!--this sets the usgs std styles -->
<link href="http://www.usgs.gov/styles/common.css" rel="stylesheet" type="text/css" /> 
<!--this sets the title bar color and default header -->
<!-- <link href="http://www.usgs.gov/frameworkfiles/styles/custom.css" rel="stylesheet" type="text/css" /> -->
<!--this sets the main styles used in the Water framework -->
<!-- <link href="http://www.usgs.gov/frameworkfiles/styles/framework.css" rel="stylesheet" type="text/css" /> -->
<!--this adds or changes styles for Wisconsin applications -->
<!-- IN PARTICULAR, wi.css DEFINES THE IMAGE FILE: banner_fisc_water.jpg -->
<link href="http://wi.water.usgs.gov/styles/wi.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="http://wi.water.usgs.gov/styles/wi-print.css" rel="stylesheet" type="text/css" media="print"/> 
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree_custom.css" rel="stylesheet" type="text/css"/>
<link href="doxygen_custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- begin material from USGS -->
<table cellpadding="0" cellspacing="0" id="menutable">
  <tbody>
    <tr>
      <td width="100%" valign="top">
        <div id="usgscolorbanddata">
          <div id="usgsbanner">
            <div id="usgsidentifier">
              <a href="http://www.usgs.gov/"><img src="http://www.usgs.gov/images/header_graphic_usgsIdentifier_white.jpg" alt="USGS - science for a changing world" title="U.S. Geological Survey Home Page" width="178" height="72" />
              </a>
            </div>
            <div id="usgsccsabox">
              <div id="usgsccsa">
                <br>
                <a href="http://www.usgs.gov/">
                USGS Home
                </a>
                <br>
                <a href="http://www.usgs.gov/ask/">
                Contact USGS
                </a>
                <br>
                <a href="http://search.usgs.gov/">
                Search USGS
                </a>
              </div>
            </div>
          </div>
        </div>
        <div id="usgstitle" width=100%>
          <p>Soil Water Balance 2.0</p>
        </div> 
      </td>
    </tr>
  </tbody>
</table>
<!-- end material from USGS -->
<!-- <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- 
  <div id="titlearea">
    <table cellspacing="0" cellpadding="0">
      <tbody>
        <tr style="height: 30px;">
          <td id="projectlogo">
            <img alt="Logo" src="168x62_green.jpg"/>
          </td>
          <td style="padding-left: 0.5em;">
            <div id="projectname">
              SWB 2.0&#160;
              <span id="projectnumber">
              </span>
            </div>
            <div id="projectbrief">
              SWB 2.0 - A Modified Thornthwaite-Mather Soil-Water-Balance Code for Estimating Groundwater Recharge
            </div>
          </td>
          <td style="padding-left: 0.5em;">
              <div id="projectbrief">
                SWB 2.0 - A Modified Thornthwaite-Mather Soil-Water-Balance Code for Estimating Groundwater Recharge
              </div>
          </td>
        </tr> 
      </tbody>
    </table>
  </div>  
-->  
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md__Users_smwesten_SMWData_Source_Code_swb2_doc_src_to_doxygen_0004b_general_discussion_of_gridded_datasets.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">General Discussion of Gridded Datasets {#general} </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>SWB can ingest gridded data in three formats: Surfer, ESRI Arc ASCII, or netCDF.</p>
<h1>Supported File Types </h1>
<h1>Surfer ASCII Grid </h1>
<p>Golden Software’s ASCII grid format consists of a 5-line header followed by the data values arranged in a matrix.</p>
<p><code>DSAA 14 5 0.5 7.0 -0.4 0.0 0.0 7.0 0.5 1. 1.5 2. 2.5 3. 3.5 4. 4.5 5. 5.5 6. 6.5 7.0 0.45 0.9 1.4 1.9 2.4 2.9 3.4 3.9 4.4 4.9 5.4 5.9 6.4 6.9 0.4 0.8 1.3 1.8 2.3 2.8 3.3 3.8 4.3 4.8 5.3 5.8 6.3 6.8 0.36 0.72 1.21 1.7 2.2 2.7 3.2 3.7 4.2 4.7 5.2 5.7 6.2 6.7 0.32 0.64 1.13 1.6 2.1 2.6 3.1 3.6 4.1 4.6 5.1 5.6 6.1 6.6</code></p>
<p>The header values contain:</p>
<ol type="1">
<li>“DSAA”, a label identifying the file format as a Golden Software ASCII grid,</li>
<li>Number of columns (number of X values), number of rows (number of Y values),</li>
<li>Minimum X value, maximum X value,</li>
<li>Minimum Y value, maximum Y value,</li>
<li>Minimum Z value, maximum Z value.</li>
</ol>
<p>As one might expect, the matrix of values is arranged such that the “x” coordinates increase from lower to higher values as one moves left to right over the columns. The “y” coordinates correspond to the rows of data and decrease from higher values to lower values as one moves down the rows.</p>
<h1>ESRI ASCII Grid </h1>
<p>The publishers of ArcMap and ArcView software, the Environmental Systems Research Institute (ESRI), developed one of the most commonly used raster data formats in use. ESRI’s ASCII grid format is a simple matrix representation of the gridded dataset with a short header tacked to the top of the file.</p>
<p><code>ncols 34 nrows 4 xllcorner 739475.000000000000 yllcorner 2314000.000000000000 cellsize 10.000000000000 NODATA_value -9999 9 9 9 9 9 9 9 9 9 9 9 8 8 8 8 8 8 8 9 9 9 9 9 9 8 8 8 8 8 8 8 8 9 9 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 6 6 6 7 7 7 6 6 6 6 6 6 6 6 6 6 6 6 6 7 7 7 7 6 6 6 7 7 7 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 7 7 7 7 7 7 7 7 7 7 6 6 6 7 7 7 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6</code></p>
<p>Note that SWB does not really handle the NODATA_value codes as given in the ESRI ASCII grid files; missing values should be handled through the use of user-supplied control file directives, discussed later in this section.</p>
<h1>NetCDF </h1>
<p>NetCDF, or Network Common Data File, is a file format commonly used by researchers in atmospheric and oceanic sciences. One of the key benefits of NetCDF files is that they are designed to be platform-independent; in other words, a NetCDF file generated on a Macintosh by an application compiled with the PGI compiler should be able to be read by an application compiled with the Intel compiler and running on Windows. In addition, NetCDF files are able to store arbitrary combinations of data. This allows for substantial metadata to be stored in the NetCDF file along with the variable of interest.</p>
<p>A set of conventions, known as the Climate and Forecast Metadata Conventions, gives recommendations regarding the kind and nature of metadata to be included along with the primary variable within a NetCDF file (Eaton and others, 2011). SWB outputs written to NetCDF files attempt to adhere to the Climate and Forecast Metadata Conventions version 1.6 (CF 1.6) in order to maximize the number of third-party NetCDF tools that will work with SWB output.</p>
<p>In addition to these benefits of NetCDF file use, the fact that there are dozens of open-source tools available to read, write, and visualize NetCDF files makes them a good candidate for use with SWB. One of the most basic tools, distributed by Unidata, the maintainer of NetCDF file format, is called ncdump—a program to “dump” the contents of a NetCDF file. If we take a recent Daymet file containing daily precipitation values for 2014, we can see the stored metadata in the file:</p>
<p>```</p>
<blockquote class="doxtable">
<p>ncdump -h prcp_2014.nc4 The following metadata is returned: netcdf prcp_2014 { dimensions: x = 5268 ; y = 4823 ; time = UNLIMITED ; // (365 currently) nv = 2 ; variables: float x(x) ; x:units = "m" ; x:long_name = "x coordinate of projection" ; x:standard_name = "projection\_x\_coordinate" ; float y(y) ; y:units = "m" ; y:long_name = "y coordinate of projection" ; y:standard_name = "projection\_y\_coordinate" ; float lat(y, x) ; lat:units = "degrees\_north" ; lat:long_name = "latitude coordinate" ; lat:standard_name = "latitude" ; float lon(y, x) ; lon:units = "degrees\_east" ; lon:long_name = "longitude coordinate" ; lon:standard_name = "longitude" ; float time(time) ; time:long_name = "time" ; time:calendar = "standard" ; time:units = "days since 1980-01-01 00:00:00 UTC" ; time:bounds = "time\_bnds" ; short yearday(time) ; yearday:long_name = "yearday" ; yearday:valid_range = 1s, 365s ; float time_bnds(time, nv) ; short lambert_conformal_conic ; lambert_conformal_conic:grid_mapping_name = "lambert\_conformal\_conic" ; lambert_conformal_conic:longitude_of_central_meridian = -100. ; lambert_conformal_conic:latitude_of_projection_origin = 42.5 ; lambert_conformal_conic:false_easting = 0. ; lambert_conformal_conic:false_northing = 0. ; lambert_conformal_conic:standard_parallel = 25., 60. ; float prcp(time, y, x) ; prcp:_FillValue = -9999.f ; prcp:cell_methods = "area: sum time: sum" ; prcp:coordinates = "lat lon" ; prcp:grid_mapping = "lambert\_conformal\_conic" ; prcp:long_name = "daily total precipitation" ; prcp:missing_value = -9999.f ; prcp:units = "mm/day" ; prcp:valid_range = 0.f, 200.f ; </p>
</blockquote>
<p>// global attributes: :start_year = 2014s ; :source = "Daymet Software Version 2.0" ; :Version_software = "Daymet Software Version 2.0" ; :Version_data = "Daymet Data Version 2.1" ; :Conventions = "CF-1.4" ; :citation = "Please see http://daymet.ornl.gov/ for current Daymet data citation information" ; :references = "Please see http://daymet.ornl.gov/ for current information on Daymet references" ; } ```</p>
<p>This particular file contains three classes of metadata: dimensions, variables, and global attributes. As can be seen above, the file contains data about 4 “dimensions”: x, y, time, and nv. Nine variables are defined, each of which is references in terms of the dimensions. The key variable in the file is “prcp”—the daily precipitation value. prcp is defined at each time (day) in the file for all values of x and y. Note the way that dates and times are specified in the NetCDF file: as a real-valued number of days since 1980-01-01 00:00:00 UTC.</p>
<p>SWB does not have the ability to make sense of much of this metadata. It is the user’s responsibility to be aware of the physical units that each of the datasets is stored in. Control file directives may be used to convert precipitation in metric units (mm/day) to inches per day. We recommend examining the output values of air temperature and precipitation in order to verify that any such unit conversions have been done correctly.</p>
<p>In addition, SWB cannot parse the variables and attributes associated with any map projection that may have been used when the NetCDF file was created. The user needs to be aware of the geographic projection (if any) that was used. If the gridded data do not match the SWB project bounds exactly, a “PROJ4 string” must be provided to enable SWB to translate between project coordinates and the NetCDF file coordinates.</p>
<h1>Geographic Projections </h1>
<p>Later versions of SWB are linked to the PROJ4 library, originally written by a USGS scientist (Evenden, 1990). PROJ4 is used by many commonly used mapping applications, both open source and proprietary. The library provides a set of routines that may be used to calculate forward and backward coordinate transformations. SWB make use of this library in order to translate coordinates found in external data files to the coordinates in use by the SWB project.</p>
<h1>Treatment of Missing Values </h1>
<h2>References </h2>
<p>Eaton, B., Gregory, J., Drach, B., Taylor, K., Hankin, S., Caron, J., Signell, R., Bently, P., Rappa, G., Heinke, H., Pamment, A., and Juckes, M., 2011, NetCDF climate and forecast (CF) metadata conventions. NetCDF climate and forecast (CF) metadata conventions, version 1.6, accessed 2/08/2016 at <a href="http://cfconventions.org/cf-conventions/v1.6.0/cf-conventions.html">http://cfconventions.org/cf-conventions/v1.6.0/cf-conventions.html</a>.</p>
<p>Evenden, G.I., 1990, Cartographic projection procedures for the UNIX environment; a user’s manual: 90-284. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Oct 3 2016 09:57:12 for SWB 2.0 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
