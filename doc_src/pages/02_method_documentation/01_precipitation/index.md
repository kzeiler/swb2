title: Precipitation

<style>
table {
width: 100%;
}
table,th,td {
border: 1px solid black;
border-collapse: collapse;
}
th, td {
padding: 5px;
}
th {
text-align: center;
}
</style>

Precipitation data may be supplied to SWB in gridded or tabular form or
may be estimated using the method of fragments.

In the method of fragments module, daily rainfall for each grid cell is
generated by use of a combination of monthly gridded rainfall datasets
and a set of discrete point observations. First, fragments are generated
by dividing each daily rainfall observation at a point for a particular
month by the total rainfall measured at the gage for that month. This
method results in a set of fragments for that particular month in which
the total number of fragments is equal to the number of days in the
month, and for which the sum of the fragment values equals one. Thiessen
polygons are developed from the network of viable rainfall gages within
the model domain and are used to develop a set of rainfall zones (fig.
1–1). Thus, for each of the rainfall zones, a set of monthly fragment
values is developed; the number of distinct fragment sets at a gage is
about equal to the number of years the gage has been in operation. A
partial set of fragments that might be generated for an arbitrary month
is listed in table 1–1. A similar set of tables must be generated for
each month in the year.

1.  Example of fragment sets for an arbitrary month associated with a
    rainfall gage.

[n, the number of complete months for which daily rainfall data are
available; ..., omitted values]

| Fragment set | Day 1            |  Day 2   | Day 3    | Day n    | Day 31   |
|--------------|------------------|----------|----------|----------|----------|
| 1            | 0.01             | 0.07     | 0.03     | ...      | 0.04     |
| 2            | 0.02             | 0.05     | 0.02     | ...      | 0.02     |
| ...          | ...              | ...      | ...      | ...      | ...      |
| n            | 0.03             | 0.06     | 0.04     | ...      | 0.03     |

Daily rainfall for a particular cell within a given month is synthesized
by multiplying total gridded-rainfall amount for that month by the daily
fragment value. The daily fragment values are extracted from one of the
available fragment sets associated with a rainfall gage; the particular
fragment set is chosen at random at the beginning of each month of the
simulation (fig. 1–1).

1.  Example of synthetic daily rainfall generation for a specific
    rainfall zone.


|       Variable      |   Type  | Rank |  Dimensions  | Units |           Description           |
|:-------------------:|:-------:|:----:|:------------:|:-----:|:--------------------------------|
| `nchan`             | Int32   | 0    | NA           | NA    | Number of channels              |
| `system`            | String  | 0    | NA           | NA    | Name of the NPA system(s)       |
| `data_source`       | String  | 0    | NA           | NA    | Source of the NPA geometry data |
| `id`                | String  | 1    | [`nchan`]    | NA    | Channel ID                      |
| `radius`            | Float64 | 1    | [`nchan`]    | cm    | Line of sight radius at midplane or tangency point |
| `a_shape`           | Int16   | 1    | [`nchan`]    | NA    | Shape of the aperture (1=rect, 2=circ) |
| `d_shape`           | Int16   | 1    | [`nchan`]    | NA    | Shape of the detector (1=rect, 2=circ) |
| `a_cent`            | Float64 | 2    | [3,`nchan`]  | cm    | Position of the center of the aperture |
| `a_redge`           | Float64 | 2    | [3,`nchan`]  | cm    | Position of the apertures right edge |
| `a_tedge`           | Float64 | 2    | [3,`nchan`]  | cm    | Position of the apertures top edge |
| `d_cent`            | Float64 | 2    | [3,`nchan`]  | cm    | Position of the center of the detector |
| `d_redge`           | Float64 | 2    | [3,`nchan`]  | cm    | Position of the detectors right edge |
| `d_tedge`           | Float64 | 2    | [3,`nchan`]  | cm    | Position of the detectors top edge |


The SWB model grid is divided into rainfall zones, and an integer-grid
file that contains the rainfall zone numbers is loaded into the model
during initialization. An example of this integer-grid file is in the
set of digital files associated with appendix 4. Each rainfall zone
represents an area in which a rainfall gage has operated for several
consecutive years; at each zone, the observed daily values possibly can
be used to create a rainfall-fragment set. The calculated rainfall
supplied to SWB takes on the correct total monthly rainfall amount (from
the grid), whereas the timing and magnitude of daily events is taken
from an actual sequence of events as contained in the fragment set.
